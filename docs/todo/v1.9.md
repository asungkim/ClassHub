# TODO v1.9 (Requirement v1.3 → Spec v1.3 기준)

> 요구사항 출처: `docs/requirement/v1.3.md` (Use Case/흐름)
> 스펙 반영: `docs/spec/v1.3.md`
> 세부 기능은 각 TODO 진행 시 PLAN 문서에서 정의한다.
> Phase 1~3은 v1.8 시점에 완료된 내역을 보존하며, Phase 4부터 Season2 리팩터링 기준으로 재구성한다.

# Phase 1. 프로젝트 초기화

## 🔹 Epic: 개발 환경 & 규칙 수립

- ✅ 코드 컨벤션 정의 (Java, TS)
- ✅ 커밋 컨벤션 / 브랜치 전략 정의 (Conventional Commits)
- ✅ GitHub Issue 템플릿 생성
- ✅ GitHub PR 템플릿 생성
- ✅ 백엔드 Spring 초기 설정
- ✅ global 도메인 공통 구성 정의

---

# Phase 2. Member/Auth/Invitation 기반 다지기 (선행 작업 정리)

## 🔹 Epic: Member & Invitation (완료 내역 유지)

- ✅ Member 엔티티 + Repository
- ✅ Invitation 엔티티 + 상태 전환
- ✅ Auth 서비스 (Spring Security + JWT + 초대 검증)
  - ✅ Auth PLAN 세부 보완(요구/테스트 확정)
  - ✅ Spring Security Config + PasswordEncoder + JWT Provider 뼈대
  - ✅ Teacher 회원가입 API (이메일/비밀번호 암호화)
  - ✅ 로그인 API + Access/Refresh 발급
  - ✅ Refresh 토큰 재발급/로그아웃 처리
  - ✅ 초대 코드 검증 API + 초대 기반 회원가입

## 🔹 Epic: Invitation & Auth 구축

- ✅ Teacher → Assistant 초대 생성/목록/취소 API
- ✅ StudentProfile 엔티티 + Repository + CRUD (Teacher 전용), PersonlLesson 개발
- ✅ SpringDoc 기반 Swagger UI 구축 및 API 스펙 자동화
- ✅ 모든 dto 패키지 request/response로 분리 + domain/sample 패키지 삭제
- ✅ 기초 데이터 저장
- ✅ Next.js + Tailwind 기본 프로젝트 세팅 및 공용 API 클라이언트/환경 변수 구성
  - ✅ 공통 레이아웃·세션 상태·에러 처리 컴포넌트 정비
  - ✅ 홈 진입 페이지 (Hero + 로그인 카드)
  - ✅ 선생님 회원가입 페이지 구현
  - ✅ 슈퍼어드민, 선생님, 조교, 학생별 대시보드 페이지 생성 -> 각 role에 정해진 페이지로 넘어가게
  - ✅ RefreshToken을 HttpOnly 쿠키로 저장하고 AccessToken을 재발급하는 구조 도입
  - ✅ Docker Compose로 Spring Boot + MySQL + Nginx Proxy Manager를 구성하고 HTTPS Reverse Proxy 환경 구축
  - ✅ 프론트엔드를 Vercel 등 HTTPS 배포 환경으로 올리고 API 경로를 연동

# Phase 3. HTTPS 배포 및 운영 환경 확립

## 🔹 Epic: CI/CD & 배포

- ✅ Docker Compose prod 설정 정리 (prod용 override + env 템플릿)
- ✅ Terraform으로 AWS 네트워크/EC2 기본 리소스 생성
- ✅ GitHub Actions CI/CD 파이프라인 구축 (frontend 빌드 + backend 이미지 빌드/푸시)
- ✅ EC2에 Compose 배포 및 Nginx Proxy Manager 설정 자동화
- ✅ 실제 HTTPS 도메인에서 Refresh 쿠키 흐름 검증

## 🔹 Epic: Auth & Invitation 운영 검증

- ✅ 로그아웃 기능 개발 및 대시보드 UI 개선
- ✅ 조교와 학생 관리 및 초대 기능 연동 및 개발
  - ✅ 조교 및 학생 관리 (목록) 기능 연동 및 개발
    - ✅ 백엔드 개발
    - ✅ 프론트엔드 개발
  - ✅ 초대 기능 연동 및 개발
    - ✅ 백엔드 개발
    - ✅ 프론트엔드 개발

---

# Phase 4. 기초 기능 재구현

> 목표: Season2 로드맵에 맞춰 Auth/Member 기반을 재정비하고 엔티티/레포를 먼저 만든다.  
> 참고 문서 : `docs/desing/**` , `docs/requirement/v1.3` , `docs/spec/v1.3`

## 🔹 Epic: 인증 및 권한 검증

### 백엔드

- ✅ `MemberPrincipal`에 role 추가 저장 및 JWT 토큰 클레임/필터 수정
- ✅ 로그인/로그아웃 검증
- ✅ 토큰 재발급(`/auth/refresh`) , 로그인 사용자 정보(`/auth/me`) 응답 구조 검증 및 리팩터링
- ✅ 선생님 회원가입 개발
- ✅ 학생 회원가입 개발
- ✅ 조교 초대 + verify API 개발
- ✅ 조교 회원가입 개발
  - ✅ TeacherAssistantAssignment 자동 생성
  - ✅ 초대 수락 시 Assignment 자동 연결

## 🔹 Epic: 엔티티 및 레포지토리 구현

> `docs/design/**` 기준으로 구현

### 백엔드

- ✅ 도메인 ENUM 작성
  - CompanyType, BranchType, EnrollmentStatus, ClinicAttendanceStatus, NoticeType 등
- ✅ 핵심 엔티티 생성
  - Company, Branch, Course, StudentCourseEnrollment, StudentCourseRecord
  - TeacherAssistantAssignment, ClinicSlot, ClinicSession, ClinicAttendance, ClinicRecord
  - SharedLesson, PersonalLesson, Notice, NoticeRead, WorkLog
- ✅ 테스트를 위한 Company, Branch, Member InitData 구성하기.

## 🔹 Epic: 프런트엔드 기본 페이지 재구현

> Season2 엔티티 구조 기준으로 리팩터링

### 프론트엔드

- ✅ 불필요한 코드 정리 및 기존 인증/인가 검증
- ✅ 선생님 회원가입 페이지 (Season2 엔티티 기준 리팩터링)
- ✅ 학생 회원가입 페이지 구현
- ✅ 역할별 메인 대시보드 페이지 (현행 유지/리팩터링)
- ✅ 로그인 페이지 (현행 유지/리팩터링)

---

# Phase 5. 기능별 개발 단계

> 목표: 핵심 워크플로(Course/Enrollment/Lesson/Clinic/Invitation) CRUD 우선 구현. Notice/WorkLog는 Phase 7에서 추가 기능으로 개발.

- 큰 단위 Epic으로 묶고 **CRUD → 조회/대시보드/캘린더** 순서로 진행한다.
- 각 기능은 계층적으로 개발하되 기능 단위로 백엔드 → 프론트 순차 완성한다.

## 🔹 Epic: Company & Branch 관리

### 백엔드

- ⚪ Company CRUD API
- ⚪ Branch CRUD API
- ⚪ SuperAdmin 검증 API (`PATCH /companies/{id}/verify`, `PATCH /branches/{id}/verify`)
  - verifiedStatus 전환 (UNVERIFIED → VERIFIED)

### 프론트엔드

- ⚪ 학원 관리 페이지 (출강 학원 등록 페이지)
- ⚪ Company/Branch 검증 페이지 (SuperAdmin)
  - UNVERIFIED 목록 조회 및 상태 전환 UI

---

## 🔹 Epic: Course 관리

### 백엔드

- ⚪ Course CRUD API
- ⚪ Course 목록 조회 API (역할별)
  - Teacher: 본인이 생성한 Course 목록
  - Student: Course 검색/필터링, 본인이 듣는 Course 목록
- ⚪ Course InitData 생성

### 프론트엔드

- ⚪ Course 관리 페이지 (Teacher)
  - Course 목록, 수정/삭제, 활성화/비활성화 토글
  - Course 시간표 페이지
- ⚪ Course 검색 페이지 (Student)
  - 공개 Course 필터링 및 검색

---

## 🔹 Epic: Enrollment 워크플로

### 백엔드

- ⚪ StudentEnrollmentRequest CRUD API
  - 학생의 Course 등록 신청 (`POST /enrollment-requests`)
  - Teacher의 요청 조회/승인/거절 (`GET/PATCH /enrollment-requests`)
- ⚪ StudentCourseEnrollment 및 Record 생성
  - 승인 시 자동 Enrollment + Record 생성
  - defaultClinicSlotId, assistantMemberId 설정(Teacher)
- ⚪ Enrollment 목록 조회 API
  - Student: 본인의 수강 목록 (`GET /students/me/courses`)
  - Teacher:
    - Course별 수강생 목록 (`GET /courses/{id}/enrollments`)
    - 본인 수업을 듣는 수강생 전체 목록
- ⚪ Enrollment InitData 생성

### 프론트엔드

- ⚪ Course 등록 신청 페이지 (Student)
  - Course 상세 + 신청 폼
- ⚪ 등록 요청 관리 페이지 (Teacher, Assistant)
  - 요청 목록, 승인/거절 처리
- ⚪ 수강생 관리 페이지 (Teacher)
  - Course별 수강생 목록, 조교/클리닉 default 배정
  - 본인 수업을 듣는 수강생 전체 목록

---

## 🔹 Epic: Lesson 관리

### 백엔드

- ⚪ SharedLesson CRUD API (`POST/GET/PATCH/DELETE /shared-lessons`)
  - Course 전체 공유 수업 일정
  - Teacher/Assistant 작성 권한
- ⚪ PersonalLesson CRUD API (`POST/GET/PATCH/DELETE /personal-lessons`)
  - 특정 학생 개별 수업 일정
  - StudentCourseRecord FK 기반
- ⚪ Lesson InitData 생성 (SharedLesson, PersonalLesson)

### 프론트엔드

- ⚪ 통합 수업 작성 페이지(Teacher)
  - 반 선택 후 SharedLesson + 쓰고 싶은 학생 선택 후 PersonalLesson 작성
- ⚪ SharedLesson 관리 페이지 (Teacher)
- ⚪ PersonalLesson 관리 페이지 (Teacher)

---

## 🔹 Epic: Clinic 시스템

### 백엔드

- ⚪ ClinicSlot CRUD API (`POST/GET/PATCH/DELETE /clinic-slots`)
  - Course별 클리닉 시간대 정의
- ⚪ ClinicSession 주간 스케줄러 생성
  - Slot 기반 주차별 Session 자동 생성
- ⚪ ClinicAttendance CRUD API
  - Session별 학생 참석 기록 (`POST/PATCH /clinic-attendances`)
  - 학생의 변경 및 추가 신청
- ⚪ ClinicRecord CRUD API (`POST/GET/PATCH /clinic-records`)
  - Teacher, Assistant의 클리닉 작성
- ⚪ Clinic InitData 생성 (ClinicSlot, ClinicSession, ClinicAttendance)

### 프론트엔드

- ⚪ ClinicSlot 관리 페이지 (Teacher)
  - Course별 클리닉 시간대 설정
- ⚪ ClinicSession 조회 페이지 (Teacher, Assistant)
  - 주차별 Session 목록 및 Attendance 체크
- ⚪ ClinicRecord 작성 페이지 (Teacher, Assistant)
  - Session별 학생 피드백 작성
- ⚪ Clinic 일정 페이지 (Student)
  - 본인의 반 목록을 확인하고 연결된 ClinicSession 확인
  - 본인 배정된 클리닉 조회 및 주차 변경 요청

---

## 🔹 Epic: 통합 조회 & 대시보드

### 백엔드

- ⚪ StudentCalendar Aggregation API (`GET /students/{id}/calendar`)
  - SharedLesson + PersonalLesson + ClinicSession 통합 조회
  - 월별/주별 필터링
- ⚪ Teacher 대시보드 API
  - Course 요약, 등록 요청 수, 클리닉 현황
- ⚪ Assistant 대시보드 API
  - 배정된 Course, 금주 Clinic Session 수
- ⚪ Student 대시보드 API
  - 수강 중인 Course, 이번 주 일정 요약

### 프론트엔드

- ⚪ Teacher 대시보드 페이지
  - Course 카드, 등록 요청, 클리닉 통계
- ⚪ Assistant 대시보드 페이지
  - 배정 Course, Clinic 일정, WorkLog 요약
- ⚪ Student 대시보드 페이지
  - 수강 목록, 캘린더 위젯, 다가오는 클리닉
- ⚪ 통합 캘린더 페이지 (모든 역할)
  - 역할별 필터링된 일정 표시

---

# Phase 6. 베타 서비스 준비

> 목표: 역할별 핵심 플로우를 재현하고 배포/모니터링 체계를 확립한다.

## 🔹 Epic: 역할별 통합 시나리오 QA

- ⚪ Teacher 플로우: Company 등록 → Branch 생성 → Course 생성 → 학생 등록 승인 → Lesson 작성 → 클리닉 운영
- ⚪ Assistant 플로우: 초대 코드 수락 → Assignment 확인 → Clinic 일정 확인 → Attendance 처리 → Record 작성
- ⚪ Student 플로우: Course 검색 → EnrollmentRequest 생성 → 상태 조회 → 캘린더/클리닉 확인 → Attendance 변경
- ⚪ 권한/에러 케이스 검증 (접근 차단, 만료 초대, 중복 신청 등)

## 🔹 Epic: 베타 릴리스 준비

- ⚪ 역할별 기능 QA 완료 보고
- ⚪ 성능 테스트 (50명 동시 접속 + Clinic 배치 부하)
- ⚪ 보안 점검 (JWT 만료/재발급, 권한 우회 시나리오, HTTPS)
- ⚪ 프로덕션 배포 자동화 검증 (Docker Compose + GitHub Actions)

## 🔹 Epic: 모니터링/운영 채널

- ⚪ 모니터링 대시보드 (CPU/메모리/디스크, API Latency, 배치 성공률)
- ⚪ 에러 알림 채널 (Slack or Email) 세팅
- ⚪ 사용자 행동 로깅(주요 버튼/신청 이벤트) 설계

## 🔹 Epic: 배치/스케줄러 안정성

- ⚪ ClinicSession/Attendance 주간 배치 모니터링 + 재시도 전략 정의
- ⚪ Invitation 만료 처리 스케줄러 검증 (ASSISTANT 코드 정리)
- ⚪ Scheduler/배치 단위 테스트 + 통합 테스트 + 장애 대응 절차 마련

## 🔹 Epic: 문서화 & 운영 체크리스트

- ⚪ API 문서/Swagger 정리 (권한/예제/오류 코드 최신화)
- ⚪ 역할별 수동 검증 체크리스트 업데이트 (Teacher/Assistant/Student)
- ⚪ 운영 배포 체크리스트 v1.3 (도메인, DNS, Refresh 쿠키, 배치 스케줄) 작성 및 공유

---

# Phase 7. 개선 사항 및 추가 기능 개발

> 목표: 베타 운영 피드백을 반영하고 Notice/WorkLog 등 추가 기능을 구현한다.

## 🔹 Epic: Notice 기능 구현

- ⚪ Notice CRUD API 개발 (Teacher/Assistant)
- ⚪ Notice 조회/읽음 처리 API (Student)
- ⚪ 프론트엔드: Notice 작성/관리 페이지
- ⚪ 프론트엔드: Notice 목록/상세 페이지 (역할별)

## 🔹 Epic: WorkLog 기능 구현

- ⚪ WorkLog CRUD API 개발 (Assistant)
- ⚪ WorkLog 조회/승인 API (Teacher)
- ⚪ 프론트엔드: WorkLog 작성/수정 페이지 (Assistant)
- ⚪ 프론트엔드: WorkLog 조회/승인 페이지 (Teacher)

## 🔹 Epic: 사용자 피드백 반영

- ⚪ 베타 사용자 피드백 수집 및 분석
- ⚪ 우선순위 높은 개선사항 구현
- ⚪ UI/UX 개선 (모바일 반응형, 접근성)
- ⚪ 성능 최적화 (쿼리 튜닝, 캐싱 전략)

## 🔹 Epic: E2E 자동화 테스트

- ⚪ Playwright/Cypress 테스트 러너 구성
- ⚪ 역할별 핵심 시나리오 자동화 (Teacher/Assistant/Student)
- ⚪ GitHub Actions에 E2E 테스트 통합
- ⚪ 테스트 데이터 시드 전략 수립 및 문서화

## 🔹 Epic: 운영 안정화

- ⚪ 에러 로깅 및 모니터링 강화
- ⚪ 알림 채널 구성 (Slack/Email)
- ⚪ 배치 작업 재시도 전략 및 장애 대응 절차
- ⚪ API 문서 및 운영 매뉴얼 업데이트
